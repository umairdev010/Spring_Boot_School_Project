
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>School Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding: 20px; background: #f8f9fa; }
        .card { margin-bottom: 20px; }
        table { margin-top: 20px; }
    </style>
</head>
<body>
<div class="container">
    <h1 class="mb-4">üè´ School Management System</h1>

    <!-- Display current URL info -->
    <div class="alert alert-info">
        <strong>Access URLs:</strong><br>
        Application: <code>http://localhost:8082/</code><br>
        H2 Console: <a th:href="@{/h2-console}" target="_blank">http://localhost:8082/h2-console</a>
    </div>

    <!-- School Info Form -->
    <div class="card">
        <div class="card-header bg-primary text-white">
            <h5>Add/Edit School</h5>
        </div>
        <div class="card-body">
            <form th:action="@{/save}" method="post" th:object="${school}">
                <!-- Hidden ID field -->
                <input type="hidden" name="id" th:value="*{id}">

                <div class="row">
                    <div class="col-md-4">
                        <label class="form-label">School Name</label>
                        <input type="text" class="form-control" name="name"
                               th:value="*{name}" required>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">City</label>
                        <input type="text" class="form-control" name="city"
                               th:value="*{city}" required>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Established Year</label>
                        <input type="number" class="form-control" name="estbYear"
                               th:value="*{estbYear}">
                    </div>
                </div>
                <button type="submit" class="btn btn-success mt-3">Save School</button>
            </form>
        </div>
    </div>

    <!-- Schools List -->
    <div class="card">
        <div class="card-header bg-secondary text-white">
            <h5>All Schools</h5>
        </div>
        <div class="card-body">
            <table class="table table-striped" th:if="${allSchools != null and !allSchools.empty}">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>City</th>
                    <th>Established Year</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="school : ${allSchools}">
                    <td th:text="${school.id}"></td>
                    <td th:text="${school.name}"></td>
                    <td th:text="${school.city}"></td>
                    <td th:text="${school.estbYear}"></td>
                    <td>
                        <a th:href="@{/edit/{id}(id=${school.id})}" class="btn btn-sm btn-warning">Edit</a>
                        <a th:href="@{/delete/{id}(id=${school.id})}" class="btn btn-sm btn-danger">Delete</a>
                    </td>
                </tr>
                </tbody>
            </table>
            <div th:if="${allSchools == null or allSchools.empty}" class="text-center text-muted">
                No schools found. Add one above!
            </div>
        </div>
    </div>

    <footer class="mt-4 text-center text-muted">
        <p>Spring Boot + H2 Database + Thymeleaf | Port: 8082 | Context: /</p>
    </footer>
</div>
</body>
</html>